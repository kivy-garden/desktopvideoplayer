<DesktopVideoPlayer>:
    _video: video
    play_btn: play_btn
    remaining_label: remaining_label
    bottom_layout: bottom_layout
    _volume_slider: volume_slider
    _volume_btn: volume_btn
    context_menu: context_menu

    on_parent: not self._initialized and root._init()

    Video:
        id: video
        pos: root.pos
        opacity: 0
        on_duration: root.loaded()
        allow_stretch: True
        on_position: root.update_progress(video.position)
        on_state: root.video_state_changed()
        on_touch_down: root._on_touch_down(*args)
#        on_touch_down: root._on_touch_down(args[1])
#        on_key_down: root.on_key_down(args[1])

    AnchorLayout:
        id: bottom_layout
        anchor_y: 'bottom'
        pos: root.pos
        size_hint: 1, None
        height: 70
        StackLayout:
            spacing: 10, 0
            padding: 10, 10, 10, 10
#            background_color: [1, 0, 1, 0.5]
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.5
                Rectangle:
                    pos: self.pos
                    size: self.size
            Button:
                id: play_btn
                size_hint: None, None
                size: 50, 50
                background_normal: root.current_play_btn_image
                background_down: root.current_play_btn_image
                on_state: self.opacity = (0.6 if self.state == 'down' else 1.0)
                on_release: root.toggle_video()
            VideoPlayerProgressBar:
                pos_hint: None, None
                id: progress_bar
                video: video
                size_hint: None, None
                width: root.width - play_btn.width - volume_btn.width - remaining_label.width - 50
                height: 50
            Button:
                id: remaining_label
                on_release: root.toggle_remaining_time(args[0])
                text: "test"
                size_hint: None, None
                size: self.texture_size[0], 50
                background_color: [1, 1, 1, 0]
                text: "00:00"
            Button:
                id: volume_btn
                background_normal: root.current_volume_btn_image
                background_down: root.current_volume_btn_image
                size_hint: None, None
                size: 50, 50
                on_release: root.toggle_muted()
                on_state: self.opacity = (0.6 if self.state == 'down' else 1.0)
                Slider:
                    id: volume_slider
                    pos_hint: None, None
                    pos: self.parent.pos[0], 0
                    size_hint: 1, None
                    size: 50, 100
                    orientation: 'vertical'
                    range: 0, 100
                    value: 100
                    opacity: 0
                    on_value: root.volume = self.value_normalized

    ContextMenu:
        id: context_menu
        ContextMenuTextItem:
            text: "Jump to"
            on_release: root._context_item_release(args[0])
            ContextMenu:
                ContextMenuTextItem:
                    text: "SubMenu"
        ContextMenuTextItem:
            text: "Show info"
        ContextMenuTextItem:
            text: "Take screenshot"

<JumpToInput>:
